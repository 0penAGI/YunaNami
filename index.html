<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Yuna Nami v4.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Hiragino Sans', 'MS Gothic', sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }
        .container {
            position: relative;
            padding: 55px 10px 10px 10px;
            max-width: 600px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #111;
            border-radius: 5px;
            border: 1px solid #333;
        }
        .title {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }
        .subtitle {
            font-size: 12px;
            color: #ccc;
        }
        .language-selector {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        .lang-btn {
            padding: 5px 10px;
            border: 1px solid #333;
            background: #222;
            color: #ccc;
            border-radius: 3px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .lang-btn.active {
            background: #444;
            color: #fff;
            border-color: #666;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        .stat-card {
            background: #111;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #333;
        }
        .stat-label {
            font-size: 10px;
            color: #ccc;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #fff;
        }
        .energy-bar {
            width: 100%;
            height: 20px;
            background: #111;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 15px;
            border: 1px solid #333;
        }
        .energy-fill {
            height: 100%;
            background: #fff;
            transition: width 0.5s ease;
        }
        .buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }
        .btn {
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: #333;
            color: #fff;
        }
        .btn:hover {
            background: #444;
        }
        .message-input {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #333;
            background: #111;
            color: #fff;
            font-size: 14px;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 60px;
        }
        .message-input:focus {
            outline: none;
            border-color: #555;
        }
        .emoji-panel {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .emoji {
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.2s;
            user-select: none;
        }
        .emoji:hover {
            transform: scale(1.1);
        }
        .response {
            background: #111;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            min-height: 80px;
        }
        .japanese-text {
            font-size: 16px;
            color: #fff;
            text-align: center;
            margin: 8px 0;
        }
        .footer {
            text-align: center;
            padding: 10px;
            color: #ccc;
            font-size: 10px;
            margin-top: 20px;
        }
        .ai-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #0f0;
            margin-right: 5px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">Yuna Nami v4.0</div>
            <div class="subtitle"><span class="ai-indicator"></span>Â§öË®ÄË™ûAI „Éã„É•„Éº„É≠„É≥ „Éü„Éº„É† „Ç∑„Çπ„ÉÜ„É†</div>
            <div class="japanese-text">Ê∑∑Ê≤å„Å®Ë®ÄË™û„ÇíË∂Ö„Åà„Å¶ ‚ú®</div>
            
            <div class="language-selector">
                <div class="lang-btn active" data-lang="ja">Êó•Êú¨Ë™û</div>
                <div class="lang-btn" data-lang="ru">–†—É—Å—Å–∫–∏–π</div>
                <div class="lang-btn" data-lang="en">English</div>
                <div class="lang-btn" data-lang="es">Espa√±ol</div>
                <div class="lang-btn" data-lang="fr">Fran√ßais</div>
                <div class="lang-btn" data-lang="zh">‰∏≠Êñá</div>
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">„É°„ÉÉ„Çª„Éº„Ç∏</div>
                <div class="stat-value" id="msgCount">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Ë®ÄË™û</div>
                <div class="stat-value" id="langCount">6</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">„Éã„É•„Éº„É≠„É≥</div>
                <div class="stat-value" id="neuronCount">1.2M</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">ÁêÜËß£</div>
                <div class="stat-value" id="understanding">97%</div>
            </div>
        </div>
        
        <div class="energy-bar">
            <div class="energy-fill" id="energyFill" style="width: 0%"></div>
        </div>
        
        <div class="emoji-panel">
            <span class="emoji" onclick="addEmoji('„Å´„ÇÉ')">„Å´„ÇÉ</span>
            <span class="emoji" onclick="addEmoji('‚ú®')">‚ú®</span>
            <span class="emoji" onclick="addEmoji('üêæ')">üêæ</span>
            <span class="emoji" onclick="addEmoji('üí•')">üí•</span>
            <span class="emoji" onclick="addEmoji('üòº')">üòº</span>
            <span class="emoji" onclick="addEmoji('ü§ñ')">ü§ñ</span>
            <span class="emoji" onclick="addEmoji('üåÄ')">üåÄ</span>
            <span class="emoji" onclick="addEmoji('üåç')">üåç</span>
        </div>
        
        <textarea
            class="message-input"
            id="messageInput"
            placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ... Ê∑∑Ê≤å„ÅØË®ÄËëâ„ÇíË∂Ö„Åà„Å¶..."
        ></textarea>
        
        <div class="buttons">
            <button class="btn" onclick="sendMessage()">
                üì® ÈÄÅ‰ø°
            </button>
            <button class="btn" onclick="analyzeMessage()">
                üîç ÂàÜÊûê
            </button>
            <button class="btn" onclick="translateMessage()">
                üåê ÁøªË®≥
            </button>
            <button class="btn" onclick="getStatus()">
                üìä „Çπ„ÉÜ„Éº„Çø„Çπ
            </button>
            <button class="btn" onclick="trollMode()">
                üé≠ „Éà„É≠„Éº„É´
            </button>
            <button class="btn" onclick="fetchReddit()">
                üî• Reddit
            </button>
        </div>
        
        <div class="response" id="response" style="display: none;">
            <div class="japanese-text" id="responseText"></div>
        </div>
        
        <div class="footer">
            Â§öË®ÄË™ûAI„Ç∑„Çπ„ÉÜ„É† v4.0 | Ê∑∑Ê≤å„Å®Ë®ÄË™û„ÅÆË™øÂíå
        </div>
    </div>

    <script>
        // Telegram Web App API
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();
        
        // –¢–µ–∫—É—â–∏–π —è–∑—ã–∫
        let currentLang = 'ja';
        
        // –°–ª–æ–≤–∞—Ä–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤
        const translations = {
            ja: {
                placeholder: "„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ... Ê∑∑Ê≤å„ÅØË®ÄËëâ„ÇíË∂Ö„Åà„Å¶...",
                send: "üì® ÈÄÅ‰ø°",
                analyze: "üîç ÂàÜÊûê",
                translate: "üåê ÁøªË®≥",
                status: "üìä „Çπ„ÉÜ„Éº„Çø„Çπ",
                troll: "üé≠ „Éà„É≠„Éº„É´",
                reddit: "üî• Reddit",
                sending: "ÈÄÅ‰ø°‰∏≠...",
                analyzing: "ÂàÜÊûê‰∏≠...",
                translating: "ÁøªË®≥‰∏≠..."
            },
            ru: {
                placeholder: "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ... —Ö–∞–æ—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å...",
                send: "üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å",
                analyze: "üîç –ê–Ω–∞–ª–∏–∑",
                translate: "üåê –ü–µ—Ä–µ–≤–æ–¥",
                status: "üìä –°—Ç–∞—Ç—É—Å",
                troll: "üé≠ –¢—Ä–æ–ª–ª—å",
                reddit: "üî• Reddit",
                sending: "–û—Ç–ø—Ä–∞–≤–∫–∞...",
                analyzing: "–ê–Ω–∞–ª–∏–∑...",
                translating: "–ü–µ—Ä–µ–≤–æ–¥..."
            },
            en: {
                placeholder: "Enter message... chaos transcends language...",
                send: "üì® Send",
                analyze: "üîç Analyze",
                translate: "üåê Translate",
                status: "üìä Status",
                troll: "üé≠ Troll",
                reddit: "üî• Reddit",
                sending: "Sending...",
                analyzing: "Analyzing...",
                translating: "Translating..."
            },
            es: {
                placeholder: "Escribe un mensaje... el caos trasciende el lenguaje...",
                send: "üì® Enviar",
                analyze: "üîç Analizar",
                translate: "üåê Traducir",
                status: "üìä Estado",
                troll: "üé≠ Troll",
                reddit: "üî• Reddit",
                sending: "Enviando...",
                analyzing: "Analizando...",
                translating: "Traduciendo..."
            },
            fr: {
                placeholder: "Entrez un message... le chaos transcende la langue...",
                send: "üì® Envoyer",
                analyze: "üîç Analyser",
                translate: "üåê Traduire",
                status: "üìä Statut",
                troll: "üé≠ Troll",
                reddit: "üî• Reddit",
                sending: "Envoi en cours...",
                analyzing: "Analyse en cours...",
                translating: "Traduction en cours..."
            },
            zh: {
                placeholder: "ËæìÂÖ•Ê∂àÊÅØ... Ê∑∑Ê≤åË∂ÖË∂äËØ≠Ë®Ä...",
                send: "üì® ÂèëÈÄÅ",
                analyze: "üîç ÂàÜÊûê",
                translate: "üåê ÁøªËØë",
                status: "üìä Áä∂ÊÄÅ",
                troll: "üé≠ ÊÅ∂Êêû",
                reddit: "üî• Reddit",
                sending: "ÂèëÈÄÅ‰∏≠...",
                analyzing: "ÂàÜÊûê‰∏≠...",
                translating: "ÁøªËØë‰∏≠..."
            }
        };

        // –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
        const smartResponses = {
            ja: [
                '„Å´„ÇÉ„Çì... „É°„ÉÉ„Çª„Éº„Ç∏„ÇíÊ∑±Â±§Â≠¶Áøí„ÅßÂá¶ÁêÜ„Åó„Åæ„Åó„Åü ‚ú®',
                'ÈáèÂ≠ê„Éã„É•„Éº„É©„É´„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅåÂøúÁ≠î„ÇíÁîüÊàê üêæ',
                'Â§öË®ÄË™ûAI„ÅåÊñáËÑà„ÇíÁêÜËß£ üí´',
                '„Ç´„Ç™„ÇπÁêÜË´ñ„Å´Âü∫„Å•„ÅèÂøúÁ≠î„ÇíË®àÁÆó‰∏≠... üòº',
                'ÊôÇÁ©∫„ÇíË∂Ö„Åà„ÅüË®ÄË™ûÂá¶ÁêÜ„ÇíÂÆüË°å ü§ñ',
                '„Ç®„É¢„Éº„Ç∑„Éß„Éä„É´AI„ÅåÂÖ±ÊÑü„Åó„Å¶„ÅÑ„Åæ„Åô üå∏',
                'Âêõ„ÅÆË®ÄËëâ„Åå„Éã„É•„Éº„É©„É´„Éë„Çπ„ÇíÂΩ¢Êàê„Åô„Çã üåÄ',
                'Á¢∫ÁéáÁöÑË®ÄË™û„É¢„Éá„É´„ÅåÊúÄÈÅ©Ëß£„ÇíÂá∫Âäõ üí•'
            ],
            ru: [
                '–ú—è—É... —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –≥–ª—É–±–æ–∫–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é ‚ú®',
                '–ö–≤–∞–Ω—Ç–æ–≤–∞—è –Ω–µ–π—Ä–æ—Å–µ—Ç—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç üêæ',
                '–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π –ò–ò –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç üí´',
                '–í—ã—á–∏—Å–ª—è—é –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–æ—Ä–∏–∏ —Ö–∞–æ—Å–∞... üòº',
                '–í—ã–ø–æ–ª–Ω—è—é —è–∑—ã–∫–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–Ω–µ –≤—Ä–µ–º–µ–Ω–∏ ü§ñ',
                '–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò —Å–æ–ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç –≤–∞–º üå∏',
                '–¢–≤–æ–∏ —Å–ª–æ–≤–∞ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ –ø—É—Ç–∏ üåÄ',
                '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è —è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å –≤—ã–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç üí•'
            ],
            en: [
                'Meow... message processed by deep learning ‚ú®',
                'Quantum neural network generating response üêæ',
                'Multilingual AI understands context üí´',
                'Calculating response based on chaos theory... üòº',
                'Performing trans-temporal language processing ü§ñ',
                'Emotional AI empathizing with you üå∏',
                'Your words are forming neural pathways üåÄ',
                'Probabilistic language model outputting optimal solution üí•'
            ],
            es: [
                'Miau... mensaje procesado por aprendizaje profundo ‚ú®',
                'Red neuronal cu√°ntica generando respuesta üêæ',
                'IA multiling√ºe comprendiendo contexto üí´',
                'Calculando respuesta basada en teor√≠a del caos... üòº',
                'Procesamiento ling√º√≠stico trans-temporal en curso ü§ñ',
                'IA emocional empatizando contigo üå∏',
                'Tus palabras est√°n formando pathways neurales üåÄ',
                'Modelo ling√º√≠stico probabil√≠stico generando soluci√≥n √≥ptima üí•'
            ],
            fr: [
                'Miaou... message trait√© par apprentissage profond ‚ú®',
                'R√©seau neuronal quantique g√©n√©rant une r√©ponse üêæ',
                'IA multilingue comprenant le contexte üí´',
                'Calcul de la r√©ponse bas√©e sur la th√©orie du chaos... üòº',
                'Traitement linguistique trans-temporel en cours ü§ñ',
                'IA √©motionnelle empathisant avec vous üå∏',
                'Vos mots forment des pathways neuronaux üåÄ',
                'Mod√®le linguistique probabiliste produisant une solution optimale üí•'
            ],
            zh: [
                'Âñµ... Ê∂àÊÅØÂ∑≤ÈÄöËøáÊ∑±Â∫¶Â≠¶‰π†Â§ÑÁêÜ ‚ú®',
                'ÈáèÂ≠êÁ•ûÁªèÁΩëÁªúÊ≠£Âú®ÁîüÊàêÂìçÂ∫î üêæ',
                'Â§öËØ≠Ë®ÄAIÁêÜËß£‰∏ä‰∏ãÊñá üí´',
                'Âü∫‰∫éÊ∑∑Ê≤åÁêÜËÆ∫ËÆ°ÁÆóÂìçÂ∫î... üòº',
                'ÊâßË°åË∑®Êó∂Á©∫ËØ≠Ë®ÄÂ§ÑÁêÜ ü§ñ',
                'ÊÉÖÊÑüAIÊ≠£Âú®ÂÖ±ÊÉÖ üå∏',
                '‰Ω†ÁöÑËØùËØ≠Ê≠£Âú®ÂΩ¢ÊàêÁ•ûÁªèÈÄöË∑Ø üåÄ',
                'Ê¶ÇÁéáËØ≠Ë®ÄÊ®°ÂûãËæìÂá∫ÊúÄ‰ºòËß£ üí•'
            ]
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–∑—ã–∫–æ–≤
        function initLanguages() {
            const langButtons = document.querySelectorAll('.lang-btn');
            langButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    langButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentLang = this.getAttribute('data-lang');
                    updateLanguage();
                });
            });
            updateLanguage();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ —è–∑—ã–∫—É
        function updateLanguage() {
            const lang = translations[currentLang];
            document.getElementById('messageInput').placeholder = lang.placeholder;
            document.querySelector('.buttons button:nth-child(1)').textContent = lang.send;
            document.querySelector('.buttons button:nth-child(2)').textContent = lang.analyze;
            document.querySelector('.buttons button:nth-child(3)').textContent = lang.translate;
            document.querySelector('.buttons button:nth-child(4)').textContent = lang.status;
            document.querySelector('.buttons button:nth-child(5)').textContent = lang.troll;
            document.querySelector('.buttons button:nth-child(6)').textContent = lang.reddit;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            document.getElementById('msgCount').textContent = Math.floor(Math.random() * 1000 + 500);
            document.getElementById('langCount').textContent = '6';
            document.getElementById('neuronCount').textContent = (1.2 + Math.random() * 0.3).toFixed(1) + 'M';
            document.getElementById('understanding').textContent = Math.floor(Math.random() * 5 + 95) + '%';
           
            const energy = Math.random() * 100;
            document.getElementById('energyFill').style.width = energy + '%';
        }

        // –î–æ–±–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏
        function addEmoji(emoji) {
            const input = document.getElementById('messageInput');
            input.value += emoji;
            input.focus();
        }

        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const msg = input.value.trim();
            if (!msg) return;
            showResponse(translations[currentLang].sending);
           
            tg.sendData(JSON.stringify({
                action: 'message',
                text: msg,
                lang: currentLang
            }));
            
            setTimeout(() => {
                const responses = smartResponses[currentLang];
                const randomResp = responses[Math.floor(Math.random() * responses.length)];
                showResponse(randomResp);
                input.value = '';
                updateStats();
            }, 1000);
        }

        // –ê–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
        function analyzeMessage() {
            const input = document.getElementById('messageInput');
            const msg = input.value.trim();
            if (!msg) {
                showResponse(getText('analyze_empty'));
                return;
            }
            
            showResponse(translations[currentLang].analyzing);
            
            setTimeout(() => {
                const analysis = generateAnalysis(msg, currentLang);
                showResponse(analysis);
                updateStats();
            }, 1500);
        }

        // –ü–µ—Ä–µ–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è
        function translateMessage() {
            const input = document.getElementById('messageInput');
            const msg = input.value.trim();
            if (!msg) {
                showResponse(getText('translate_empty'));
                return;
            }
            
            showResponse(translations[currentLang].translating);
            
            setTimeout(() => {
                const translation = generateTranslation(msg, currentLang);
                showResponse(translation);
                updateStats();
            }, 1200);
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞
        function generateAnalysis(text, lang) {
            const length = text.length;
            const words = text.split(/\s+/).length;
            const sentiment = ['„Éù„Ç∏„ÉÜ„Ç£„Éñ', '„Éç„Ç¨„ÉÜ„Ç£„Éñ', '„Éã„É•„Éº„Éà„É©„É´'][Math.floor(Math.random() * 3)];
            const complexity = length > 50 ? 'È´ò' : '‰Ωé';
            
            const analyses = {
                ja: `ÂàÜÊûêÁµêÊûú:\nÊñáÂ≠óÊï∞: ${length}\nÂçòË™ûÊï∞: ${words}\nÊÑüÊÉÖ: ${sentiment}\nË§áÈõë„Åï: ${complexity}\nAI‰ø°È†ºÂ∫¶: ${Math.floor(Math.random() * 20 + 80)}%`,
                ru: `–ê–Ω–∞–ª–∏–∑:\n–°–∏–º–≤–æ–ª—ã: ${length}\n–°–ª–æ–≤–∞: ${words}\n–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: ${sentiment}\n–°–ª–æ–∂–Ω–æ—Å—Ç—å: ${complexity}\n–î–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å –ò–ò: ${Math.floor(Math.random() * 20 + 80)}%`,
                en: `Analysis:\nCharacters: ${length}\nWords: ${words}\nSentiment: ${sentiment}\nComplexity: ${complexity}\nAI Confidence: ${Math.floor(Math.random() * 20 + 80)}%`,
                es: `An√°lisis:\nCaracteres: ${length}\nPalabras: ${words}\nSentimiento: ${sentiment}\nComplejidad: ${complexity}\nConfianza IA: ${Math.floor(Math.random() * 20 + 80)}%`,
                fr: `Analyse:\nCaract√®res: ${length}\nMots: ${words}\nSentiment: ${sentiment}\nComplexit√©: ${complexity}\nConfiance IA: ${Math.floor(Math.random() * 20 + 80)}%`,
                zh: `ÂàÜÊûêÁªìÊûú:\nÂ≠óÁ¨¶Êï∞: ${length}\nÂçïËØçÊï∞: ${words}\nÊÉÖÊÑü: ${sentiment}\nÂ§çÊùÇÂ∫¶: ${complexity}\nAIÂèØ‰ø°Â∫¶: ${Math.floor(Math.random() * 20 + 80)}%`
            };
            
            return analyses[lang];
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
        function generateTranslation(text, sourceLang) {
            const languages = ['ja', 'ru', 'en', 'es', 'fr', 'zh'];
            const targetLang = languages[Math.floor(Math.random() * languages.length)];
            
            const translationsMap = {
                ja: { ru: '–ø–µ—Ä–µ–≤–æ–¥', en: 'translation', es: 'traducci√≥n', fr: 'traduction', zh: 'ÁøªËØë' },
                ru: { ja: 'ÁøªË®≥', en: 'translation', es: 'traducci√≥n', fr: 'traduction', zh: 'ÁøªËØë' },
                en: { ja: 'ÁøªË®≥', ru: '–ø–µ—Ä–µ–≤–æ–¥', es: 'traducci√≥n', fr: 'traduction', zh: 'ÁøªËØë' },
                es: { ja: 'ÁøªË®≥', ru: '–ø–µ—Ä–µ–≤–æ–¥', en: 'translation', fr: 'traduction', zh: 'ÁøªËØë' },
                fr: { ja: 'ÁøªË®≥', ru: '–ø–µ—Ä–µ–≤–æ–¥', en: 'translation', es: 'traducci√≥n', zh: 'ÁøªËØë' },
                zh: { ja: 'ÁøªË®≥', ru: '–ø–µ—Ä–µ–≤–æ–¥', en: 'translation', es: 'traducci√≥n', fr: 'traduction' }
            };
            
            return `ÁøªË®≥ÂÆå‰∫Ü:\n"${text.substring(0, 20)}..." ‚Üí ${translationsMap[sourceLang][targetLang]}\n‰ø°È†ºÂ∫¶: ${Math.floor(Math.random() * 15 + 85)}%`;
        }

        // –°—Ç–∞—Ç—É—Å
        function getStatus() {
            showResponse(getText('status_checking'));
           
            tg.sendData(JSON.stringify({
                action: 'status',
                lang: currentLang
            }));
            
            setTimeout(() => {
                const energy = Math.floor(Math.random() * 100);
                const emotions = {
                    ja: ['„Éï„É≠„ÉºÁä∂ÊÖã', '„Ç´„Ç™„Çπ„Éª„Ç®„ÇØ„Çπ„Çø„Ç∑„Éº', '„Çø„Ç§„É†„Éª„ÉØ„Éº„Éó', '„Éü„Éº„É†„Éª„É¨„Çæ„Éä„É≥„Çπ'],
                    ru: ['–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞', '–≠–∫—Å—Ç–∞–∑ —Ö–∞–æ—Å–∞', '–í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–µ—Ç–ª—è', '–ú–µ–º-—Ä–µ–∑–æ–Ω–∞–Ω—Å'],
                    en: ['Flow State', 'Chaos Ecstasy', 'Time Warp', 'Meme Resonance'],
                    es: ['Estado de Flujo', '√âxtasis del Caos', 'Curva Temporal', 'Resonancia Mem√©tica'],
                    fr: ['√âtat de Flux', 'Extase du Chaos', 'Distorsion Temporelle', 'R√©sonance M√©m√©tique'],
                    zh: ['ÂøÉÊµÅÁä∂ÊÄÅ', 'Ê∑∑Ê≤åÁãÇÂñú', 'Êó∂Èó¥Êâ≠Êõ≤', 'Ê®°Âõ†ÂÖ±ÊåØ']
                };
                
                const status = {
                    ja: `„Ç∑„Çπ„ÉÜ„É†Á®ºÂÉç‰∏≠ ‚ú®\n„Ç®„Éç„É´„ÇÆ„Éº: ${energy}%\nÊÑüÊÉÖ: ${emotions[currentLang][Math.floor(Math.random() * emotions[currentLang].length)]}\nË®ÄË™û: 6/6 „Ç¢„ÇØ„ÉÜ„Ç£„Éñ\n„Éã„É•„Éº„É≠„É≥: 1.2M Áô∫ÁÅ´‰∏≠`,
                    ru: `–°–∏—Å—Ç–µ–º–∞ –∞–∫—Ç–∏–≤–Ω–∞ ‚ú®\n–≠–Ω–µ—Ä–≥–∏—è: ${energy}%\n–≠–º–æ—Ü–∏–∏: ${emotions[currentLang][Math.floor(Math.random() * emotions[currentLang].length)]}\n–Ø–∑—ã–∫–∏: 6/6 –∞–∫—Ç–∏–≤–Ω—ã\n–ù–µ–π—Ä–æ–Ω—ã: 1.2M –∞–∫—Ç–∏–≤–Ω—ã`,
                    en: `System operational ‚ú®\nEnergy: ${energy}%\nEmotion: ${emotions[currentLang][Math.floor(Math.random() * emotions[currentLang].length)]}\nLanguages: 6/6 active\nNeurons: 1.2M firing`,
                    es: `Sistema operativo ‚ú®\nEnerg√≠a: ${energy}%\nEmoci√≥n: ${emotions[currentLang][Math.floor(Math.random() * emotions[currentLang].length)]}\nIdiomas: 6/6 activos\nNeuronas: 1.2M activas`,
                    fr: `Syst√®me op√©rationnel ‚ú®\n√ânergie: ${energy}%\n√âmotion: ${emotions[currentLang][Math.floor(Math.random() * emotions[currentLang].length)]}\nLangues: 6/6 actives\nNeurones: 1.2M actifs`,
                    zh: `Á≥ªÁªüËøêË°å‰∏≠ ‚ú®\nËÉΩÈáè: ${energy}%\nÊÉÖÊÑü: ${emotions[currentLang][Math.floor(Math.random() * emotions[currentLang].length)]}\nËØ≠Ë®Ä: 6/6 Ê¥ªË∑É\nÁ•ûÁªèÂÖÉ: 1.2M ÊøÄÊ¥ª`
                };
                
                showResponse(status[currentLang]);
                updateStats();
            }, 800);
        }

        // –¢—Ä–æ–ª–ª—å —Ä–µ–∂–∏–º
        function trollMode() {
            showResponse(getText('troll_activation'));
           
            tg.sendData(JSON.stringify({
                action: 'troll',
                lang: currentLang
            }));
            
            setTimeout(() => {
                const trolls = smartResponses[currentLang];
                showResponse(trolls[Math.floor(Math.random() * trolls.length)]);
            }, 1200);
        }

        // Reddit –ø–∞—Ä—Å–∏–Ω–≥
        function fetchReddit() {
            showResponse(getText('reddit_parsing'));
           
            tg.sendData(JSON.stringify({
                action: 'reddit',
                lang: currentLang
            }));
            
            setTimeout(() => {
                const count = Math.floor(Math.random() * 50) + 10;
                const responses = {
                    ja: `RedditËß£ÊûêÂÆå‰∫ÜÔºÅ +${count} „Éü„Éº„É†\nÊ∑∑Ê≤å„ÅåÂº∑Âåñ„Åï„Çå„Åü üî•\nÊñ∞„Åó„ÅÑË®ÄË™û„Éë„Çø„Éº„É≥Ê§úÂá∫`,
                    ru: `Reddit –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω! +${count} –º–µ–º–æ–≤\n–•–∞–æ—Å —É—Å–∏–ª–µ–Ω üî•\n–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–æ–≤—ã–µ —è–∑—ã–∫–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã`,
                    en: `Reddit parsing complete! +${count} memes\nChaos amplified üî•\nNew language patterns detected`,
                    es: `¬°An√°lisis de Reddit completado! +${count} memes\nCaos amplificado üî•\nNuevos patrones ling√º√≠sticos detectados`,
                    fr: `Analyse Reddit termin√©e ! +${count} m√®mes\nChaos amplifi√© üî•\nNouveaux mod√®les linguistiques d√©tect√©s`,
                    zh: `RedditËß£ÊûêÂÆåÊàêÔºÅ +${count} ‰∏™Ê¢ó\nÊ∑∑Ê≤åÂ∑≤Â¢ûÂº∫ üî•\nÊ£ÄÊµãÂà∞Êñ∞ËØ≠Ë®ÄÊ®°Âºè`
                };
                
                showResponse(responses[currentLang]);
                updateStats();
            }, 2000);
        }

        // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç –ø–æ –∫–ª—é—á—É
        function getText(key) {
            const texts = {
                analyze_empty: {
                    ja: 'ÂàÜÊûê„Åô„Çã„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...',
                    ru: '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞...',
                    en: 'Enter text to analyze...',
                    es: 'Ingresa texto para analizar...',
                    fr: 'Entrez du texte √† analyser...',
                    zh: 'ËØ∑ËæìÂÖ•Ë¶ÅÂàÜÊûêÁöÑÊñáÊú¨...'
                },
                translate_empty: {
                    ja: 'ÁøªË®≥„Åô„Çã„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...',
                    ru: '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞...',
                    en: 'Enter text to translate...',
                    es: 'Ingresa texto para traducir...',
                    fr: 'Entrez du texte √† traduire...',
                    zh: 'ËØ∑ËæìÂÖ•Ë¶ÅÁøªËØëÁöÑÊñáÊú¨...'
                },
                status_checking: {
                    ja: '„Çπ„ÉÜ„Éº„Çø„ÇπÁ¢∫Ë™ç‰∏≠...',
                    ru: '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...',
                    en: 'Checking status...',
                    es: 'Verificando estado...',
                    fr: 'V√©rification du statut...',
                    zh: 'Ê£ÄÊü•Áä∂ÊÄÅ‰∏≠...'
                },
                troll_activation: {
                    ja: '„Éà„É≠„Éº„É´„É¢„Éº„ÉâËµ∑Âãï...',
                    ru: '–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ç—Ä–æ–ª–ª—å-—Ä–µ–∂–∏–º–∞...',
                    en: 'Activating troll mode...',
                    es: 'Activando modo troll...',
                    fr: 'Activation du mode troll...',
                    zh: 'ÂêØÂä®ÊÅ∂ÊêûÊ®°Âºè...'
                },
                reddit_parsing: {
                    ja: 'RedditËß£Êûê‰∏≠...',
                    ru: '–ü–∞—Ä—Å–∏–Ω–≥ Reddit...',
                    en: 'Parsing Reddit...',
                    es: 'Analizando Reddit...',
                    fr: 'Analyse de Reddit...',
                    zh: 'Ëß£ÊûêReddit‰∏≠...'
                }
            };
            return texts[key][currentLang];
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç
        function showResponse(text) {
            const response = document.getElementById('response');
            const responseText = document.getElementById('responseText');
            responseText.textContent = text;
            response.style.display = 'block';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            initLanguages();
            updateStats();
            setInterval(updateStats, 10000);
            
            // Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            document.getElementById('messageInput').addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }

        // –ó–∞–ø—É—Å–∫
        init();
    </script>
</body>
</html>
